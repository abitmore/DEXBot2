
> dexbot2@0.6.0 test
> node tests/test_utils.js && node tests/test_order_grid.js && node tests/test_logger.js && node tests/test_manager.js && node tests/test_account_totals.js && node tests/connection_test.js && node tests/test_key_validation.js && node tests/test_subscriptions.js && node tests/test_fills.js && node tests/test_account_selection.js && node tests/test_autoderive.js && node tests/test_price_derive.js && node tests/test_price_no_positional.js && node tests/test_price_orientation.js && node tests/test_price_tolerance.js && node tests/test_chain_helpers.js && node tests/test_templates_ordering.js && node tests/test_startup_decision.js && node tests/test_partial_order_edge_cases.js && node tests/test_integration_partial_complex.js && node tests/test_anchor_refill_strategy.js && node tests/test_anchor_refill_integration.js && node tests/test_anchor_refill_endtoend.js && node tests/test_precision_quantization.js && node tests/test_precision_integration.js

Running utils tests
utils tests passed
Running order_grid tests
order_grid tests passed
Running logger tests
logger tests passed
Running manager tests
[2026-01-04T16:14:16.152Z] [INFO] Activated virtual buy at 95.0000 (Amount: 100.00000000)
[2026-01-04T16:14:16.159Z] [INFO] Initialized grid with 14 orders.
[2026-01-04T16:14:16.159Z] [INFO] Funds Status: Buy 0.00000000 QUOTE | Sell 0.00000000 BASE

===== ORDER GRID (SAMPLE) =====
Market: BASE/QUOTE @ 100
Price		Type		State		Size
-----------------------------------------------
185.8029         sell           virtual        1.45511000
168.9117         sell           virtual        1.53382000
153.5561         sell           virtual        1.61679000


139.5965         sell           virtual        1.70424000
126.9059         sell           virtual        1.79643000
115.3690         sell           virtual        1.89361000
104.8809         spread         virtual        0.00000000
94.8683          spread         virtual        0.00000000
85.3815          buy            virtual        189.36053000
76.8433          buy            virtual        179.64317000
69.1590          buy            virtual        170.42447000


62.2431          buy            virtual        161.67885000
56.0188          buy            virtual        153.38202000
50.4169          buy            virtual        145.51096000
===============================================

rotate furthest strategy tests passed
manager tests passed
[2026-01-04T16:14:16.166Z] [WARN] WARNING: Fund invariant violation (BUY grid): gridCommitted (1000.00000000) > chainTotal (0.00000000)
[2026-01-04T16:14:16.166Z] [INFO] Prepared buy order 1/1 at 95.00 (Amount: 1000.00000000)
[2026-01-04T16:14:16.166Z] [WARN] WARNING: Fund invariant violation (BUY grid): gridCommitted (1000.00000000) > chainTotal (0.00000000)
[2026-01-04T16:14:16.166Z] [WARN] WARNING: Fund invariant violation (BUY grid): gridCommitted (1000.00000000) > chainTotal (0.00000000)
[2026-01-04T16:14:16.166Z] [WARN] WARNING: Fund invariant violation (BUY grid): gridCommitted (1000.00000000) > chainTotal (0.00000000)
[2026-01-04T16:14:16.166Z] [WARN] WARNING: Fund invariant violation (SELL grid): gridCommitted (10.00000000) > chainTotal (0.00000000)
[2026-01-04T16:14:16.166Z] [INFO] Prepared sell order 1/1 at 110.00 (Amount: 10.00000000)
spread selection tests passed
Running account totals waiter tests
account totals waiter tests passed
Testing BitShares connection with btsdex (shared client)...
modules/bitshares_client: BitShares connected
âœ… Connected to BitShares API
âœ… Dynamic global properties retrieved
Head block number: 107091856
âœ… BTS asset retrieved
BTS precision: 5
ðŸŽ‰ All connection tests passed!
valid_wif_uncompressed 51 { valid: true }
valid_wif_compressed 52 { valid: true }
valid_pvt_k1 16 { valid: true }
valid_hex 64 { valid: true }
invalid_short 4 { valid: false, reason: 'Unrecognized key format' }
invalid_chars 9 { valid: false, reason: 'Unrecognized key format' }
Testing listenForFills subscribe/unsubscribe behavior
modules/bitshares_client: BitShares connected
Listening for fills on account: bbot4 (total listeners: 1)
Listening for fills on account: bbot4 (total listeners: 2)
subscribe returns: function function
Unsubscribe calls completed without throwing
OK
Starting test for listening to filled orders...
Listening for fills on account bbot4. Waiting briefly and then exiting.
modules/bitshares_client: BitShares connected
Listening for fills on account: bbot4 (total listeners: 1)

Stopping listener (test timeout)
Testing account order read for configured account...
Running autoderive for bot: XRP-BTS
Autoderive test failed: Error: Calculated orders fall below minimum allowable size.
    at Grid.initializeGrid (/home/alex/Dokumente/BTS/DEXbot/Git/DEXBot2/modules/order/grid.js:191:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async runAutoderiveForBot (/home/alex/Dokumente/BTS/DEXbot/Git/DEXBot2/tests/test_autoderive.js:61:5)
    at async main (/home/alex/Dokumente/BTS/DEXbot/Git/DEXBot2/tests/test_autoderive.js:84:9)
